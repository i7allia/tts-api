<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TTS –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 40px auto; padding: 20px; }
        textarea { width: 100%; height: 100px; margin: 10px 0; padding: 10px; }
        button { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        select, input { margin: 5px 0; padding: 5px; width: 100%; }
        audio { width: 100%; margin-top: 20px; }
    </style>
</head>
<body>
    <h2>üéµ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–µ—á–∏ (TTS API)</h2>
    
    <textarea id="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∫–∏...">–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –æ–∑–≤—É—á–∫–∞ —Ç–µ–∫—Å—Ç–∞.</textarea>
    
    <div>
        <label>–ì–æ–ª–æ—Å:</label>
        <select id="voice">
            <option value="ru-RU-SvetlanaNeural">–°–≤–µ—Ç–ª–∞–Ω–∞ (–∂–µ–Ω—Å–∫–∏–π, RU)</option>
            <option value="ru-RU-DmitryNeural">–î–º–∏—Ç—Ä–∏–π (–º—É–∂—Å–∫–æ–π, RU)</option>
            <option value="en-US-JennyNeural">Jenny (–∂–µ–Ω—Å–∫–∏–π, EN)</option>
            <option value="en-US-GuyNeural">Guy (–º—É–∂—Å–∫–æ–π, EN)</option>
        </select>
    </div>
    
    <div>
        <label>URL –≤–∞—à–µ–≥–æ API:</label>
        <input type="text" id="apiUrl" value="https://–í–ê–®-–ü–†–û–ï–ö–¢.up.railway.app">
        <small>–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Railway URL</small>
    </div>
    
    <button onclick="generateSpeech()">üé§ –û–∑–≤—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç</button>
    
    <audio id="audioPlayer" controls></audio>
    
    <script>
        async function generateSpeech() {
            const text = document.getElementById('text').value;
            const voice = document.getElementById('voice').value;
            const apiUrl = document.getElementById('apiUrl').value;
            
            const button = event.target;
            button.disabled = true;
            button.textContent = '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...';
            
            try {
                // –§–æ—Ä–º–∏—Ä—É–µ–º URL –∑–∞–ø—Ä–æ—Å–∞
                const url = `${apiUrl}/tts?text=${encodeURIComponent(text)}&voice=${voice}`;
                
                // –ü–æ–ª—É—á–∞–µ–º –∞—É–¥–∏–æ
                const response = await fetch(url);
                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ API');
                
                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                document.getElementById('audioPlayer').src = audioUrl;
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            } finally {
                button.disabled = false;
                button.textContent = 'üé§ –û–∑–≤—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç';
            }
        }
        
        // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Railway URL
        document.getElementById('apiUrl').value = window.location.hostname.includes('railway') 
            ? window.location.origin 
            : 'https://–í–ê–®-–ü–†–û–ï–ö–¢.up.railway.app';
    </script>
</body>
</html>